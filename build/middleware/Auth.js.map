{"version":3,"sources":["../../src/middleware/Auth.js"],"names":["jwt","require","jwtConfig","module","exports","req","res","next","authHeader","get","isAuth","token","split","decodedToken","verify","secret","err","userId"],"mappings":";;;;;;AAAA,IAAMA,GAAG,GAAGC,OAAO,CAAC,cAAD,CAAnB;;eAC+BA,OAAO,CAAC,uBAAD,C;IAArBC,S;;AAEjBC,MAAM,CAACC,OAAP,GAAiB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACnC,MAAMC,UAAU,GAAGH,GAAG,CAACI,GAAJ,CAAQ,eAAR,CAAnB;;AACA,MAAI,CAACD,UAAL,EAAiB;AACfH,IAAAA,GAAG,CAACK,MAAJ,GAAa,KAAb;AACA,WAAOH,IAAI,EAAX;AACD;;AACD,MAAMI,KAAK,GAAGH,UAAU,CAACI,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAd,CANmC,CAMI;;AACvC,MAAI,CAACD,KAAD,IAAUA,KAAK,KAAK,EAAxB,EAA4B;AAC1BN,IAAAA,GAAG,CAACK,MAAJ,GAAa,KAAb;AACA,WAAOH,IAAI,EAAX;AACD;;AACD,MAAIM,YAAJ;;AACA,MAAI;AACFA,IAAAA,YAAY,GAAGb,GAAG,CAACc,MAAJ,CAAWH,KAAX,EAAkBT,SAAS,CAACa,MAA5B,CAAf;AACD,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZX,IAAAA,GAAG,CAACK,MAAJ,GAAa,KAAb;AACA,WAAOH,IAAI,EAAX;AACD;;AACD,MAAI,CAACM,YAAL,EAAmB;AACjBR,IAAAA,GAAG,CAACK,MAAJ,GAAa,KAAb;AACA,WAAOH,IAAI,EAAX;AACD;;AACDF,EAAAA,GAAG,CAACK,MAAJ,GAAa,IAAb;AACAL,EAAAA,GAAG,CAACY,MAAJ,GAAaJ,YAAY,CAACI,MAA1B;AACAV,EAAAA,IAAI;AACL,CAzBD","sourcesContent":["const jwt = require('jsonwebtoken');\r\nconst { default: jwtConfig } = require('../configs/jwt.config');\r\n\r\nmodule.exports = (req, res, next) => {\r\n  const authHeader = req.get('Authorization');\r\n  if (!authHeader) {\r\n    req.isAuth = false;\r\n    return next();\r\n  }\r\n  const token = authHeader.split(' ')[1];//Bearer token\r\n  if (!token || token === '') {\r\n    req.isAuth = false;\r\n    return next();\r\n  }\r\n  let decodedToken;\r\n  try {\r\n    decodedToken = jwt.verify(token, jwtConfig.secret);\r\n  } catch (err) {\r\n    req.isAuth = false;\r\n    return next();\r\n  }\r\n  if (!decodedToken) {\r\n    req.isAuth = false;\r\n    return next();\r\n  }\r\n  req.isAuth = true;\r\n  req.userId = decodedToken.userId;\r\n  next();\r\n};"],"file":"Auth.js"}